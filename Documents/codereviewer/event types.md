```json
{

"object_kind": "note",

"event_type": "note",

"user": {

"id": 22064404,

"name": "PAI PENG",

"username": "ppeng24",

"avatar_url":

"https://secure.gravatar.com/avatar/7369fd66f4a56641f07ce6c13

8726e8f37fb5ba89fd4ce2a3f23767960cfe4?s=80&d=identicon",

"email": "[REDACTED]"

},

"project_id": 60287318,

"project": {

"id": 60287318,

"name": "code-reviewer-final",

"description": null,

"web_url":

"https://gitlab.com/isv5994829/code-reviewer-final",

"avatar_url": null,

"git_ssh_url":

"git@gitlab.com:isv5994829/code-reviewer-final.git",

"git_http_url":

"https://gitlab.com/isv5994829/code-reviewer-final.git",

"namespace": "ISV",

"visibility_level": 0,

"path_with_namespace":

"isv5994829/code-reviewer-final",

"default_branch": "main",

"ci_config_path": "",

"homepage":

"https://gitlab.com/isv5994829/code-reviewer-final",

"url":

"git@gitlab.com:isv5994829/code-reviewer-final.git",

"ssh_url":

"git@gitlab.com:isv5994829/code-reviewer-final.git",

"http_url":

"https://gitlab.com/isv5994829/code-reviewer-final.git"

},

"object_attributes": {

"attachment": null,

"author_id": 22064404,

"change_position": null,

"commit_id": null,

"created_at": "2024-07-25 06:20:35 UTC",

"discussion_id":

"abc5ca0b1c1d73cbca5975abf4856e45a7a1c700",

"id": 2015316697,

"line_code": null,

"note": "asdf",

"noteable_id": 317332680,

"noteable_type": "MergeRequest",

"original_position": null,

"position": null,

"project_id": 60287318,

"resolved_at": null,

"resolved_by_id": null,

"resolved_by_push": null,

"st_diff": null,

"system": false,

"type": null,

"updated_at": "2024-07-25 06:20:35 UTC",

"updated_by_id": null,

"description": "asdf",

"url":

"https://gitlab.com/isv5994829/code-reviewer-final/-/merge_re

ests/1#note_2015316697",

"action": "create"

},

"repository": {

"name": "code-reviewer-final",

"url":

"git@gitlab.com:isv5994829/code-reviewer-final.git",

"description": null,

"homepage":

"https://gitlab.com/isv5994829/code-reviewer-final"

},

"merge_request": {

"assignee_id": null,

"author_id": 22064404,

"created_at": "2024-07-25 05:45:38 UTC",

"description": "Removed the production environment

file, updated configuration settings, and refactored the Open

model implementation.",

"draft": false,

"head_pipeline_id": null,

"id": 317332680,

"iid": 1,

"last_edited_at": null,

"last_edited_by_id": null,

"merge_commit_sha": null,

"merge_error": null,

"merge_params": {

"force_remove_source_branch": "0"

},

"merge_status": "can_be_merged",

"merge_user_id": null,

"merge_when_pipeline_succeeds": false,

"milestone_id": null,

"source_branch": "feat/webhooks",

"source_project_id": 60287318,

"state_id": 1,

"target_branch": "main",

"target_project_id": 60287318,

"time_estimate": 0,

"title": "Removed the production environment file,

updated configuration settings, and...",

"updated_at": "2024-07-25 06:20:35 UTC",

"updated_by_id": null,

"prepared_at": "2024-07-25 05:45:40 UTC",

"assignee_ids": [],

"blocking_discussions_resolved": true,

"detailed_merge_status": "mergeable",

"first_contribution": true,

"human_time_change": null,

"human_time_estimate": null,

"human_total_time_spent": null,

"labels": [],

"last_commit": {

"id": "0119ada620461cd06abdb57319d5a230bc60c4b8",

"message": "Updated comments to follow consistent

conventions across multiple files.\n",

"title": "Updated comments to follow consistent

conventions across multiple files.",

"timestamp": "2024-07-25T10:31:05+08:00",

"url":

"https://gitlab.com/isv5994829/code-reviewer-final/-/commit/0

9ada620461cd06abdb57319d5a230bc60c4b8",

"author": {

"name": "Pai (aider)",

"email": "ppeng24@wisc.edu"

}

},

"reviewer_ids": [],

"source": {

"id": 60287318,

"name": "code-reviewer-final",

"description": null,

"web_url":

"https://gitlab.com/isv5994829/code-reviewer-final",

"avatar_url": null,

"git_ssh_url":

"git@gitlab.com:isv5994829/code-reviewer-final.git",

"git_http_url":

"https://gitlab.com/isv5994829/code-reviewer-final.git",

"namespace": "ISV",

"visibility_level": 0,

"path_with_namespace":

"isv5994829/code-reviewer-final",

"default_branch": "main",

"ci_config_path": "",

"homepage":

"https://gitlab.com/isv5994829/code-reviewer-final",

"url":

"git@gitlab.com:isv5994829/code-reviewer-final.git",

"ssh_url":

"git@gitlab.com:isv5994829/code-reviewer-final.git",

"http_url":

"https://gitlab.com/isv5994829/code-reviewer-final.git"

},

"state": "opened",

"target": {

"id": 60287318,

"name": "code-reviewer-final",

"description": null,

"web_url":

"https://gitlab.com/isv5994829/code-reviewer-final",

"avatar_url": null,

"git_ssh_url":

"git@gitlab.com:isv5994829/code-reviewer-final.git",

"git_http_url":

"https://gitlab.com/isv5994829/code-reviewer-final.git",

"namespace": "ISV",

"visibility_level": 0,

"path_with_namespace":

"isv5994829/code-reviewer-final",

"default_branch": "main",

"ci_config_path": "",

"homepage":

"https://gitlab.com/isv5994829/code-reviewer-final",

"url":

"git@gitlab.com:isv5994829/code-reviewer-final.git",

"ssh_url":

"git@gitlab.com:isv5994829/code-reviewer-final.git",

"http_url":

"https://gitlab.com/isv5994829/code-reviewer-final.git"

},

"time_change": 0,

"total_time_spent": 0,

"url":

"https://gitlab.com/isv5994829/code-reviewer-final/-/merge_re

ests/1",

"work_in_progress": false,

"approval_rules": [

{

"id": 170923041,

"created_at": "2024-07-25 05:45:38 UTC",

"updated_at": "2024-07-25 05:45:38 UTC",

"merge_request_id": 317332680,

"approvals_required": 0,

"name": "All Members",

"rule_type": "any_approver",

"report_type": null,

"section": null,

"modified_from_project_rule": false,

"orchestration_policy_idx": null,

"vulnerabilities_allowed": 0,

"scanners": [],

"severity_levels": [],

"vulnerability_states": [

"new_needs_triage",

"new_dismissed"

],

"security_orchestration_policy_configuration_

": null,

"scan_result_policy_id": null,

"applicable_post_merge": null,

"project_id": 60287318,

"approval_policy_rule_id": null

}

]

}

}
```



push event type
```json
{

"object_kind": "push",

"event_name": "push",

"before": "a2ae645aedb5175a4a2e1e68c522f075bb50476f",

"after": "2d7e3cf87dc54a84e8a7ae307cdea8782f2951d3",

"ref": "refs/heads/v1.0.0",

"ref_protected": false,

"checkout_sha": "2d7e3cf87dc54a84e8a7ae307cdea8782f2951d3",

"message": null,

"user_id": 22064404,

"user_name": "PAI PENG",

"user_username": "ppeng24",

"user_email": null,

"user_avatar": "https://secure.gravatar.com/avatar/7369fd66f4a56641f07ce6c13e78726e8f37fb5ba89fd4ce2a3f23767960cfe4?s=80&d=identicon",

"project_id": 60287318,

"project": {

"id": 60287318,

"name": "code-reviewer-final",

"description": null,

"web_url": "https://gitlab.com/isv5994829/code-reviewer-final",

"avatar_url": null,

"git_ssh_url": "git@gitlab.com:isv5994829/code-reviewer-final.git",

"git_http_url": "https://gitlab.com/isv5994829/code-reviewer-final.git",

"namespace": "ISV",

"visibility_level": 0,

"path_with_namespace": "isv5994829/code-reviewer-final",

"default_branch": "main",

"ci_config_path": "",

"homepage": "https://gitlab.com/isv5994829/code-reviewer-final",

"url": "git@gitlab.com:isv5994829/code-reviewer-final.git",

"ssh_url": "git@gitlab.com:isv5994829/code-reviewer-final.git",

"http_url": "https://gitlab.com/isv5994829/code-reviewer-final.git"

},

"commits": [

{

"id": "2d7e3cf87dc54a84e8a7ae307cdea8782f2951d3",

"message": "set env production\n",

"title": "set env production",

"timestamp": "2024-08-23T10:52:31+08:00",

"url": "https://gitlab.com/isv5994829/code-reviewer-final/-/commit/2d7e3cf87dc54a84e8a7ae307cdea8782f2951d3",

"author": {

"name": "Pai",

"email": "ppeng24@wisc.edu"

},

"added": [],

"modified": [

".gitignore",

"app/__pycache__/main.cpython-312.pyc",

"app/controller/__pycache__/webhook_controller.cpython-312.pyc",

"app/controller/webhook_controller.py",

"app/main.py",

"app/routes/__pycache__/webhooks_listener.cpython-312.pyc",

"app/routes/webhooks_listener.py",

"app/service/WebhookService.py",

"app/service/__pycache__/WebhookService.cpython-312.pyc",

"app/service/__pycache__/pushService.cpython-312.pyc",

"app/service/llm/__pycache__/openai_llm.cpython-312.pyc",

"app/service/llm/openai_llm.py",

"app/service/pushService.py",

"logs/debug.log"

],

"removed": []

}

],

"total_commits_count": 1,

"push_options": {},

"repository": {

"name": "code-reviewer-final",

"url": "git@gitlab.com:isv5994829/code-reviewer-final.git",

"description": null,

"homepage": "https://gitlab.com/isv5994829/code-reviewer-final",

"git_http_url": "https://gitlab.com/isv5994829/code-reviewer-final.git",

"git_ssh_url": "git@gitlab.com:isv5994829/code-reviewer-final.git",

"visibility_level": 0

}

}
```





```json
{

"object_kind": "emoji",

"event_type": "award",

"user": {

"id": 22064404,

"name": "PAI PENG",

"username": "ppeng24",

"avatar_url": "https://secure.gravatar.com/avatar/7369fd66f4a56641f07ce6c13e78726e8f37fb5ba89fd4ce2a3f23767960cfe4?s=80&d=identicon",

"email": "[REDACTED]"

},

"project_id": 60287318,

"project": {

"id": 60287318,

"name": "code-reviewer-final",

"description": null,

"web_url": "https://gitlab.com/isv5994829/code-reviewer-final",

"avatar_url": null,

"git_ssh_url": "git@gitlab.com:isv5994829/code-reviewer-final.git",

"git_http_url": "https://gitlab.com/isv5994829/code-reviewer-final.git",

"namespace": "ISV",

"visibility_level": 0,

"path_with_namespace": "isv5994829/code-reviewer-final",

"default_branch": "main",

"ci_config_path": "",

"homepage": "https://gitlab.com/isv5994829/code-reviewer-final",

"url": "git@gitlab.com:isv5994829/code-reviewer-final.git",

"ssh_url": "git@gitlab.com:isv5994829/code-reviewer-final.git",

"http_url": "https://gitlab.com/isv5994829/code-reviewer-final.git"

},

"object_attributes": {

"user_id": 22064404,

"created_at": "2024-08-28 08:10:42 UTC",

"id": 27989675,

"name": "white_check_mark",

"awardable_type": "Note",

"awardable_id": 2078392251,

"updated_at": "2024-08-28 08:10:42 UTC",

"awarded_on_url": "https://gitlab.com/isv5994829/code-reviewer-final/-/commit/34ca4f3cf8d55af937a2db2015939945d300e173#note_2078392251"

},

"note": {

"attachment": null,

"author_id": 22191665,

"change_position": {

"base_sha": null,

"start_sha": null,

"head_sha": null,

"old_path": null,

"new_path": null,

"position_type": "text",

"old_line": null,

"new_line": null,

"line_range": null

},

"commit_id": "34ca4f3cf8d55af937a2db2015939945d300e173",

"created_at": "2024-08-28 06:50:23 UTC",

"discussion_id": "5a84542c8c7605ef5db6518960b31aa9b005ac93",

"id": 2078392251,

"line_code": "289a0c25e94505d54b2176227025ffcd1eabb9ff_30_37",

"note": "<:exclamation:> ISV\u5f6d\u6e43: \u8fd9\u6bb5\u4ee3\u7801\u589e\u52a0\u4e86\u4e24\u4e2a\u88ab\u6807\u8bb0\u4e3a`@deprecated`\u7684\u51fd\u6570\uff08`extract_discussion_id`\u548c`extract_commit_info`\uff09\u3002\u8fd9\u8868\u660e\u8fd9\u4e9b\u51fd\u6570\u5728\u5c06\u6765\u53ef\u80fd\u4f1a\u88ab\u79fb\u9664\uff0c\u5e76\u4e14\u4e0d\u518d\u63a8\u8350\u4f7f\u7528\u3002\u4e3a\u4e86\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u6e05\u6670\u6027\uff0c\u6211\u5efa\u8bae\u5982\u4e0b\u6539\u8fdb\uff1a\n\n1. **\u589e\u52a0\u6587\u6863\u5b57\u7b26\u4e32\uff08docstring\uff09**\uff1a\u5728\u8fd9\u4e24\u4e2a\u65b0\u51fd\u6570\u4e2d\u589e\u52a0\u8be6\u7ec6\u7684\u6587\u6863\u5b57\u7b26\u4e32\uff0c\u4ee5\u89e3\u91ca\u5b83\u4eec\u7684\u7528\u9014\u548c\u88ab\u5e9f\u5f03\u7684\u539f\u56e0\u3002\n \n2. **\u5f02\u5e38\u5904\u7406**\uff1a\u5728`extract_commit_info`\u51fd\u6570\u4e2d\u5904\u7406\u53ef\u80fd\u7684\u5f02\u5e38\uff0c\u4ee5\u9632\u6b62\u5728\u8bbf\u95ee`event`\u4e2d\u7684\u6570\u636e\u65f6\u53d1\u751f\u9519\u8bef\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528try-except\u7ed3\u6784\u6355\u83b7`KeyError`\u3002\n\n3. **\u66ff\u4ee3\u65b9\u6848\u7684\u8bf4\u660e**\uff1a\u5728\u51fd\u6570\u7684docstring\u4e2d\u63d0\u4f9b\u5f53\u524d\u51fd\u6570\u7684\u66ff\u4ee3\u65b9\u6848\uff0c\u4ee5\u4fbf\u5f00\u53d1\u8005\u53ef\u4ee5\u4e86\u89e3\u5e94\u4f7f\u7528\u54ea\u4e2a\u65b0\u51fd\u6570\u3002\n\n\u4ee5\u4e0b\u662f\u4fee\u6539\u5efa\u8bae\u7684\u793a\u4f8b\u4ee3\u7801\uff1a\n\n```python\n@deprecated(\"Use new_function instead.\")\ndef extract_discussion_id(event):\n \"\"\"\n Extract discussion ID from the event.\n\n Note: This function is deprecated. Please use new_function instead.\n \"\"\"\n discussion_id = event[\"object_attributes\"].get(\"discussion_id\")\n if not discussion_id:\n logging.warning(\"No discussion_id found in the event.\")\n return discussion_id\n\n@deprecated(\"Use new_function instead.\")\ndef extract_commit_info(event):\n \"\"\"\n Extract commit information from the event.\n\n Note: This function is deprecated. Please use new_function instead.\n \"\"\"\n try:\n commit_id = event[\"object_attributes\"][\"commit_id\"]\n position = {\n \"base_sha\": event[\"object_attributes\"][\"position\"][\"base_sha\"],\n \"start_sha\": event[\"object_attributes\"][\"position\"][\"start_sha\"],\n \"head_sha\": event[\"object_attributes\"][\"position\"][\"head_sha\"],\n \"new_path\": event[\"object_attributes\"][\"position\"][\"new_path\"],\n \"old_path\": event[\"object_attributes\"][\"position\"][\"old_path\"],\n \"new_line\": event[\"object_attributes\"][\"position\"][\"new_line\"],\n \"old_line\": event[\"object_attributes\"][\"position\"][\"old_line\"]\n }\n except KeyError as e:\n logging.error(f\"Missing key in event data: {e}\")\n return None\n return commit_id, position\n```\n\n\u901a\u8fc7\u8fd9\u4e9b\u6539\u8fdb\uff0c\u53ef\u4ee5\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u6e05\u6670\u5ea6\uff0c\u540c\u65f6\u589e\u5f3a\u5176\u7a33\u5b9a\u6027\uff0c\u4e5f\u6709\u52a9\u4e8e\u5f00\u53d1\u8005\u7406\u89e3\u5373\u5c06\u5230\u6765\u7684\u53d8\u5316\u3002\u7ee7\u7eed\u4fdd\u6301\u8fd9\u4e2a\u65b9\u5411\uff01\ud83d\ude00",

"noteable_id": null,

"noteable_type": "Commit",

"original_position": {

"base_sha": "3caf305e3bbfb2a7ef0d229c1dfd4aef5a764332",

"start_sha": "3caf305e3bbfb2a7ef0d229c1dfd4aef5a764332",

"head_sha": "34ca4f3cf8d55af937a2db2015939945d300e173",

"old_path": "app/utils/gitlab_utils.py",

"new_path": "app/utils/gitlab_utils.py",

"position_type": "text",

"old_line": null,

"new_line": 37,

"line_range": null

},

"position": {

"base_sha": "3caf305e3bbfb2a7ef0d229c1dfd4aef5a764332",

"start_sha": "3caf305e3bbfb2a7ef0d229c1dfd4aef5a764332",

"head_sha": "34ca4f3cf8d55af937a2db2015939945d300e173",

"old_path": "app/utils/gitlab_utils.py",

"new_path": "app/utils/gitlab_utils.py",

"position_type": "text",

"old_line": null,

"new_line": 37,

"line_range": null

},

"project_id": 60287318,

"resolved_at": null,

"resolved_by_id": null,

"resolved_by_push": null,

"st_diff": null,

"system": false,

"type": "DiffNote",

"updated_at": "2024-08-28 08:10:42 UTC",

"updated_by_id": null,

"description": "<:exclamation:> ISV\u5f6d\u6e43: \u8fd9\u6bb5\u4ee3\u7801\u589e\u52a0\u4e86\u4e24\u4e2a\u88ab\u6807\u8bb0\u4e3a`@deprecated`\u7684\u51fd\u6570\uff08`extract_discussion_id`\u548c`extract_commit_info`\uff09\u3002\u8fd9\u8868\u660e\u8fd9\u4e9b\u51fd\u6570\u5728\u5c06\u6765\u53ef\u80fd\u4f1a\u88ab\u79fb\u9664\uff0c\u5e76\u4e14\u4e0d\u518d\u63a8\u8350\u4f7f\u7528\u3002\u4e3a\u4e86\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u6e05\u6670\u6027\uff0c\u6211\u5efa\u8bae\u5982\u4e0b\u6539\u8fdb\uff1a\n\n1. **\u589e\u52a0\u6587\u6863\u5b57\u7b26\u4e32\uff08docstring\uff09**\uff1a\u5728\u8fd9\u4e24\u4e2a\u65b0\u51fd\u6570\u4e2d\u589e\u52a0\u8be6\u7ec6\u7684\u6587\u6863\u5b57\u7b26\u4e32\uff0c\u4ee5\u89e3\u91ca\u5b83\u4eec\u7684\u7528\u9014\u548c\u88ab\u5e9f\u5f03\u7684\u539f\u56e0\u3002\n \n2. **\u5f02\u5e38\u5904\u7406**\uff1a\u5728`extract_commit_info`\u51fd\u6570\u4e2d\u5904\u7406\u53ef\u80fd\u7684\u5f02\u5e38\uff0c\u4ee5\u9632\u6b62\u5728\u8bbf\u95ee`event`\u4e2d\u7684\u6570\u636e\u65f6\u53d1\u751f\u9519\u8bef\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528try-except\u7ed3\u6784\u6355\u83b7`KeyError`\u3002\n\n3. **\u66ff\u4ee3\u65b9\u6848\u7684\u8bf4\u660e**\uff1a\u5728\u51fd\u6570\u7684docstring\u4e2d\u63d0\u4f9b\u5f53\u524d\u51fd\u6570\u7684\u66ff\u4ee3\u65b9\u6848\uff0c\u4ee5\u4fbf\u5f00\u53d1\u8005\u53ef\u4ee5\u4e86\u89e3\u5e94\u4f7f\u7528\u54ea\u4e2a\u65b0\u51fd\u6570\u3002\n\n\u4ee5\u4e0b\u662f\u4fee\u6539\u5efa\u8bae\u7684\u793a\u4f8b\u4ee3\u7801\uff1a\n\n```python\n@deprecated(\"Use new_function instead.\")\ndef extract_discussion_id(event):\n \"\"\"\n Extract discussion ID from the event.\n\n Note: This function is deprecated. Please use new_function instead.\n \"\"\"\n discussion_id = event[\"object_attributes\"].get(\"discussion_id\")\n if not discussion_id:\n logging.warning(\"No discussion_id found in the event.\")\n return discussion_id\n\n@deprecated(\"Use new_function instead.\")\ndef extract_commit_info(event):\n \"\"\"\n Extract commit information from the event.\n\n Note: This function is deprecated. Please use new_function instead.\n \"\"\"\n try:\n commit_id = event[\"object_attributes\"][\"commit_id\"]\n position = {\n \"base_sha\": event[\"object_attributes\"][\"position\"][\"base_sha\"],\n \"start_sha\": event[\"object_attributes\"][\"position\"][\"start_sha\"],\n \"head_sha\": event[\"object_attributes\"][\"position\"][\"head_sha\"],\n \"new_path\": event[\"object_attributes\"][\"position\"][\"new_path\"],\n \"old_path\": event[\"object_attributes\"][\"position\"][\"old_path\"],\n \"new_line\": event[\"object_attributes\"][\"position\"][\"new_line\"],\n \"old_line\": event[\"object_attributes\"][\"position\"][\"old_line\"]\n }\n except KeyError as e:\n logging.error(f\"Missing key in event data: {e}\")\n return None\n return commit_id, position\n```\n\n\u901a\u8fc7\u8fd9\u4e9b\u6539\u8fdb\uff0c\u53ef\u4ee5\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u6e05\u6670\u5ea6\uff0c\u540c\u65f6\u589e\u5f3a\u5176\u7a33\u5b9a\u6027\uff0c\u4e5f\u6709\u52a9\u4e8e\u5f00\u53d1\u8005\u7406\u89e3\u5373\u5c06\u5230\u6765\u7684\u53d8\u5316\u3002\u7ee7\u7eed\u4fdd\u6301\u8fd9\u4e2a\u65b9\u5411\uff01\ud83d\ude00",

"url": "https://gitlab.com/isv5994829/code-reviewer-final/-/commit/34ca4f3cf8d55af937a2db2015939945d300e173#note_2078392251"

},

"commit": {

"id": "34ca4f3cf8d55af937a2db2015939945d300e173",

"message": "retry\n",

"title": "retry",

"timestamp": "2024-08-22T11:18:26+08:00",

"url": "https://gitlab.com/isv5994829/code-reviewer-final/-/commit/34ca4f3cf8d55af937a2db2015939945d300e173",

"author": {

"name": "Pai",

"email": "ppeng24@wisc.edu"

}

}

}
```